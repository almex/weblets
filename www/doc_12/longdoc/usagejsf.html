<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'/>
    <meta http-equiv="X-UA-Compatible" content="chrome=1"/>
    <meta name="description" content="Weblets : weblets full project mirror"/>

    <link rel="stylesheet" type="text/css" media="screen" href="../../../stylesheets/stylesheet.css">

    <title>Weblets in a JSF Centric Environment</title>
</head>

<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
        <a id="forkme_banner" href="https://github.com/werpu/weblets">View on GitHub</a>

        <h1 id="project_title">Weblets</h1>

        <h2 id="project_tagline">weblets full project mirror</h2>

        <section id="downloads">
            <a class="zip_download_link" href="https://github.com/werpu/weblets/zipball/master">Download this project as
                a .zip file</a>
            <a class="tar_download_link" href="https://github.com/werpu/weblets/tarball/master">Download this project as
                a tar.gz file</a>
        </section>
    </header>
</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
<section id="main_content" class="inner">
<div class="app">
<div class="app">
<div class="section"><h2>Usage of Weblets in a jsf centric environment</h2>

<p>As
    <emph>Weblets</emph>
    originated from a project which was developed for an ajax and
    <emph>JSF</emph>
    centric book,
    <emph>Weblets</emph>
    has extensive tooling support for jsf, and tries to utilize JSFs internal structures extensively, to ease
    the configuration and usage for the application programmer.
</p>

<p>
    <emph>Weblets</emph>
    itself is not
    <emph>JSF</emph>
    centric, but besides its generic web framework coverage it has a very strong
    <emph>JSF</emph>
    tooling support. Over time it might be possible that other web frameworks could be supported in a similar
    way where needed.
</p>

<p>The generic tooling support of course also works in JSF, but it doesnï¿½t have to be used, due to the easier
    configuration and usage of the internal
    <emph>JSF</emph>
    mechanisms
</p>

<div class="section"><h3>Setup</h3>

    <p>Details of the setup are described in the <a href="./setup.html">Setup guide</a>
        .</p>

    <div class="section"><h4>Setup Short summary:</h4>

        <p>Every basic
            <emph>JSF</emph>
            setup should work out of the box in a plug and play way. The only thing you which is needed is a
            valid path triggering pattern for the faces servlet.
        </p>

        <p><i>Code 0: valid path pattern in the web.xml </i>
        </p>

        <div class="source"><pre>   &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/faces/*&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;</pre>
        </div>
        <p>Of course file patterns can be used additionally.</p>

        <p>Another limitation of this system is, if you use a
            <emph>Faces Servlet</emph>
            which is not the standard
            <emph>JSF</emph>
            one you have to do a fallback to the generic configuration! However you still can use all of the
            other features
            <emph>Weblets</emph>
            provides for jsf.
        </p>
    </div>
</div>
<div class="section"><h3>Basic Functions</h3>
</div>
<div class="section"><h3>Introduction</h3>

    <p>The Weblets APIs follow the general patterns as described in <a href="./generalapi.html">Weblets Users
        Guide: Introduction to the API Patterns</a>
        . for further information please follow the link.</p>
</div>
<div class="section"><h3>JSF Frontend APIs</h3>

    <p>Over the years
        <emph>JSF</emph>
        has become the base technology of various frameworks and view technologies, hence to cover
        <emph>Weblets</emph>
        in
        <emph>JSF</emph>
        entirely, we have to cover several frontend technologies
    </p>

    <div class="section"><h4>JSF 1.1</h4>

        <p>Although nowadays basically a legacy technology, but still widely used,
            <emph>JSF</emph>
            1.1 has several limitations regarding its frontend technologies and the usage of EL.
            <emph>JSF</emph>
            1.1 in most cases relies on JSP as frontend view technology with its own api providing the
            additional work, and as
            <emph>EL</emph>
            it provides its own
            <emph>EL</emph>
            technology.
        </p>

        <p>Now to use
            <emph>Weblets</emph>
            in
            <emph>JSF</emph>
            1.1, you have basically two options
        </p>
        <ol type="1">
            <li>For cases outside of the
                <emph>JSF</emph>
                area (areas in your page outside of f:view) rely on basic jsp mechanisms as described in <a
                        href="./usagejsp.html">JSP : Usage page</a>
            </li>
            <li>Within
                <emph>JSF</emph>
                areas you can rely on an
                <emph>EL</emph>
                dummy map provided automatically to your
                <emph>JSF</emph>
                system. To use it no additional configuration is needed
            </li>
        </ol>
        <p>The following code example showcases the usage of this
            <emph>EL</emph>
            dummy map:
        </p>

        <p><i>Code 3: Usage or resource and url in a JSF frontend environment</i>
        </p>

        <div class="source"><pre>  &lt;h:outputText value=&quot;#{weblet.url['weblets.demo']['/welcome.js']}&quot; /&gt;
  &lt;h:graphicImage value=&quot;#{weblet.resource['weblets.demo']['/img/icon_alert.gif']}&quot; /&gt;</pre>
        </div>
        <p>In this example you can precisely see why you need sometimes resource
            <emph>weblet.resource</emph>
            or url
            <emph>weblet.url</emph>
            , in this example h:graphicImage adds the application context itself so we dont need a full url
            including the web application context, instead we just need a path relative to it.
        </p>

        <p><i>Code 4: Difference between url and resource in a JSF specific api</i>
        </p>

        <div class="source">
            <pre>   #{weblet.url['weblets.demo']['/welcome.js']}</pre>
        </div>
        <p>Is a typical
            <emph>JSF</emph>
            dummy map. One of
            <emph>JSF</emph>
            1.1s
            <emph>EL</emph>
            implementation is, it does not allow functions which would easy the extension of the wel, all it
            allows is properties and maps. To allow a function like behavior you can map the functionality into
            dummy maps and pass the parameters over the map keys.
        </p>
    </div>
    <div class="section">
        <h4>Facelets and
            <emph>JSF</emph>
            1.2
        </h4>

        <p>The last years facelets has become the frontend technology for many projects. One of the advantages
            of facelets is that it already provides a JSP 2.x and
            <emph>JSF</emph>
            1.2 el, so that you automatically can start to use the features of the
            <emph>EL</emph>
            in there. The above mentioned things also are valid for
            <emph>JSF</emph>
            1.2 which also has the latest
            <emph>EL</emph>
            implementation available.
        </p>

        <p>If you are in a facelet domain you have two options to utilize weblets</p>
        <ol type="1">
            <li>via
                <emph>EL</emph>
                functions (the same as in jsp 2.x)
            </li>
            <li>via the above described dummy maps</li>
        </ol>
        <p>Newer
            <emph>EL</emph>
            implementations provide so called
            <emph>EL</emph>
            functions, those are functions which can be added to the actual
            <emph>EL</emph>
            implementation to extend its functionality. If you are in a system which uses newer
            <emph>EL</emph>
            implementations, it is highly recommended to use those instead of the dummy maps.
        </p>

        <p>The next example shows how to use the
            <emph>EL</emph>
            functions:
        </p>

        <p><i>Code 5: Usage of EL functions in faclets</i>
        </p>

        <div class="source"><pre>     xmlns:wbl=&quot;http://weblets.dev.java.net/facelet-tags&quot;  this has to be added to your namespace definitions

      &lt;h:outputText value=&quot;${weblet:url('weblets.demo','/welcome.js')}&quot; /&gt;
      &lt;h:graphicImage value=&quot;${weblet:resource('weblets.demo','/img/icon_alert.gif')}&quot; /&gt;</pre>
        </div>

        For Facelet 1.2 and below the tag definitionw was following:
        <div class="source"><pre>     xmlns:wbl=&quot;http://weblets.dev.java.net/tags&quot;
      &lt;h:outputText value=&quot;${weblet:url('weblets.demo','/welcome.js')}&quot; /&gt;
      &lt;h:graphicImage value=&quot;${weblet:resource('weblets.demo','/img/icon_alert.gif')}&quot; /&gt;</pre>
        </div>


        <p>As you can see the calls are very similar, but instead of reverting into a (still available)
            <emph>JSF</emph>
            dummy map we call directly
            <emph>EL</emph>
            functions we added to our page by adding another xml namespace to our xmlns definitions.
        </p>

        <p><b>For an extensive examples of the EL function calls, check out the weblets-demo application
            provided with your weblets download package</b>
        </p>
    </div>
</div>
<div class="section"><h3>JSF 2.x Resource Handlers</h3>
    If you have reached this section in the documentation you are probably aware that JSF has introduced its own
    Resource mechanism. The so called ResourceHandlers and Resources. So how do you combine this with Weblets.
    Weblets 1.3+ provides its own ResourceHandler and Resource class which allows to access your Weblets hosted
    resources from within the JSF Resource API.
    The usage is very simple, any JSF Resource request which hits a valid Weblet resource will be served as is.
    So following code:

    <!-- HTML generated using hilite.me -->
    <div style="background: #ffffff; overflow:auto;width:auto;color:black;background:white;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre
            style="margin: 0; line-height: 125%"><span style="color: #007000">&lt;h:graphicImage</span> <span
            style="color: #0000C0">id=</span><span style="background-color: #fff0f0">&quot;yyy2&quot;</span> <span
            style="color: #0000C0">value=</span><span style="background-color: #fff0f0">&quot;./javax.faces.resource/img/icon_alert.gif.jsf?ln=weblets.demo&quot;</span><span
            style="color: #007000">/&gt;</span>
    </pre>
    </div>

    Will trigger a weblet resource loading request and will load your weblet appopriately.
    Of course As usual Weblets comes with a handful of nifty utility functions/methods which makes the generation
    of such URLs easy.

    Following example explains how to generate such urls in different ways.

    <!-- HTML generated using hilite.me -->
    <div style="background: #ffffff; overflow:auto;width:auto;color:black;background:white;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre
            style="margin: 0; line-height: 125%"><span style="color: #007000">&lt;h:graphicImage</span> <span
            style="color: #0000C0">id=</span><span style="background-color: #fff0f0">&quot;standardRequest&quot;</span> <span
            style="color: #0000C0">value=</span><span style="background-color: #fff0f0">&quot;./javax.faces.resource/img/icon_alert.gif.jsf?ln=weblets.demo&quot;</span><span
            style="color: #007000">/&gt;</span>

    <span style="color: #007000">&lt;h:graphicImage</span> <span style="color: #0000C0">id=</span><span
                style="background-color: #fff0f0">&quot;helperMap&quot;</span> <span
                style="color: #0000C0">value=</span><span style="background-color: #fff0f0">&quot;#{weblet.jsfURL[&#39;weblets.demo&#39;][&#39;/img/icon_alert.gif&#39;]}&quot;</span><span
                style="color: #007000">/&gt;</span>

    <span style="color: #007000">&lt;h:graphicImage</span> <span style="color: #0000C0">id=</span><span
                style="background-color: #fff0f0">&quot;elFunction&quot;</span> <span
                style="color: #0000C0">value=</span><span style="background-color: #fff0f0">&quot;#{wbl:jsfURL(&#39;weblets.demo&#39;,&#39;/img/icon_alert.gif&#39;)}&quot;</span><span
                style="color: #007000">/&gt;</span>

    <span style="color: #007000">&lt;h:graphicImage</span> <span style="color: #0000C0">id=</span><span
                style="background-color: #fff0f0">&quot;elFunctionWithResource&quot;</span> <span
                style="color: #0000C0">value=</span><span style="background-color: #fff0f0">&quot;./#{wbl:jsfResource(&#39;weblets.demo&#39;,&#39;/img/icon_alert.gif&#39;)}&quot;</span><span
                style="color: #007000">/&gt;</span>
    </pre>
    </div>

    We use a standard manual request, and various types of map access or el functions to generate valid JSF 2.0 url
    requests.
    Also resource handlers can use subbundles and can use the h:outputScript tag.
    Here is an example which uses both:

    <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;color:black;background:white;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #007000">&lt;h:outputScript</span> <span style="color: #0000C0">id=</span><span style="background-color: #fff0f0">&quot;loadingBundleScript&quot;</span> <span style="color: #0000C0">library=</span><span style="background-color: #fff0f0">&quot;weblets.demo&quot;</span> <span style="color: #0000C0">name=</span><span style="background-color: #fff0f0">&quot;subbundle/script1.js&quot;</span>  <span style="color: #0000C0">target=</span><span style="background-color: #fff0f0">&quot;body&quot;</span><span style="color: #007000">/&gt;</span>
    <span style="color: #007000">&lt;h:outputScript</span> <span style="color: #0000C0">id=</span><span style="background-color: #fff0f0">&quot;loadingBundleScript2&quot;</span> <span style="color: #0000C0">library=</span><span style="background-color: #fff0f0">&quot;weblets.demo&quot;</span> <span style="color: #0000C0">name=</span><span style="background-color: #fff0f0">&quot;subbundle/script2.js&quot;</span>
                      <span style="color: #0000C0">rendered=</span><span style="background-color: #fff0f0">&quot;#{wbl:isResourceLoaded(&#39;weblets.demo&#39;,&#39;/subbundle/script2.js&#39;)}&quot;</span>  <span style="color: #0000C0">target=</span><span style="background-color: #fff0f0">&quot;body&quot;</span><span style="color: #007000">/&gt;</span>
    </pre></div>

    In this example we use h:outputScript to load a <emph>Weblets</emph> resource and then we check for
    <emph>isResourceLoaded</emph>
    for the second script in case it is a subbundled script.
    (Note we have a difference in how we use the <emph>Weblets</emph> uri from within jsf and Weblets. In
    <emph>Weblets</emph> we always use a leading "/" while jsf omits the leading "/")

</div>


<div class="section"><h3>Backend APIs for the Component and Bean Developers</h3>

    <p>Component and backend authors in
        <emph>JSF</emph>
        generally face the problem, of not having a standardized way to load resources. The classical way is
        either to use
    </p>
    <ul>
        <li>a document root and relative resources</li>
        <li>a view handler
            <emph>handler.getResourceURL(context, &quot;/myresources/myScript.js&quot;);</emph>

            <p>In both methods you have to pack the resources into your application, you have to take care about
                their precise location in your document tree etc... This is burden and error prone, and
                resources can be traced down to their actual location which opens another door for hackers to
                bring in trojan horses! Besides that, changing the location or even physical source of any
                resource might cause changes in the entire application tree and even some components!</p>

            <p>Now
                <emph>Weblets</emph>
                is here to solve all those problems. And again we revert to our proven url and uri notation.
            </p>

            <p>
                <emph>Weblets</emph>
                provides for many backend technologies Utils classes which provide the usual url and uri
                notations,
                <emph>JSF</emph>
                as well:
            </p>

            <p><i>Code 6: Usage contractual API the &lt;&lt;&lt;JSF</i>
                &gt;&gt; way&gt;</p>

            <div class="source"><pre>    FacesWebletUtils.getURL(context, &quot;demo.webletname&quot;, &quot;/subpath/myresource.js&quot;)
    FacesWebletUtils.getResource(context, &quot;demo.webletname&quot;, &quot;/subpath/myresource.js&quot;)

    Context being the Faces Context!</pre>
            </div>
            <p>That is basically it, nothing more and nothing less. It is easy to call
                <emph>Weblets</emph>
                from your backing bean or component, all you have to do is, to use the provided API calls! And
                then work with their return values as you would with other url strings!
            </p>
        </li>
    </ul>
</div>
</div>
<div class="section"><h2>Summary</h2>

    <p>The usage of
        <emph>Weblets</emph>
        in
        <emph>JSF</emph>
        is very easy, depending on your configuration you can either revert to
    </p>
    <ul>
        <li>Basic JSP mechanisms</li>
        <li>
            <emph>JSF</emph>
            dummy maps
        </li>
        <li>
            <emph>EL</emph>
            functions for newer
            <emph>EL</emph>
            implementations
        </li>
    </ul>
    <p>Also for the component and bean developers easy to use
        <emph>JSF</emph>
        specific APIs have been provided
    </p>
    <hr/>
    <div class="section"><h3>Contents</h3>
        <ol type="1">
            <li><a href="./index.html"> Users documentation: Index </a>
            </li>
            <li><a href="./whatsnew.html"> What is new in this release </a>
            </li>
            <li><a href="./gettingstarted.html"> Users documentation: Getting started </a>
            </li>
            <li><a href="./setup.html"> Users documentation: Setup guide </a>
            </li>
            <li><a href="./generalapi.html"> Users documentation: Introduction to the api patterns </a>
            </li>
            <li><a href="./usagejsp.html"> Users documentation: JSP Weblets usage guide </a>
            </li>
            <li><a href="./usagejava.html"> Users documentation: Servlet Weblets usage guide </a>
            </li>
            <li><a href="./usagejsf.html"> Users documentation: JSF Weblets usage guide </a>
            </li>
            <li><a href="./usageresources.html"> Users documentation: Resources Weblets usage guide </a>
            </li>
            <li><a href="./packingweblets.html"> Users documentation: Weblets packaging guide </a>
            </li>
            <li><a href="./subbundles.html"> Users documentation: Weblets Subbundles </a>
            </li>

            <li><a href="./reporting.html"> Users documentation: Weblets reporting guide </a>
            </li>
            <li><a href="./programmingweblets.html"> Developers documentation: Programming Weblets </a>
            </li>
            <li><a href="./faq.html"> Users documentation: Weblets general FAQ </a>
            </li>
        </ol>
    </div>
</div>
</div>
</div>
</section>
</div>
</body>
</html>